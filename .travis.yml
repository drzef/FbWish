language: python
services:
- postgresql
python:
  - "3.5"
env:
  global:
    - DJANGO_SETTINGS_MODULE=config.settings.test
    - DB=postgres DEBUG=False
    - DATABASE_URL=postgres://postgres@localhost/test_db
    - secure: "NQj/U2l3hORvZoHfFIYBwS9s7mOmrD1VgnmWZbAh6xmzUAzgZdsuaOhPhzbvUUyyBtepHmAGzuJgp63pd+fS7k1P5jT0EHRzGzf4JgwHCJ6ZUElWUfPIWooHTUcMawE1aSDhON7pQ+25KW8tCRNPGVTEEt/3HegbcopdugN3oe4vxAXNl0tnJeM+V2YNBrIfReZasqPyi3+Xl+LmKYBmr0uL0ko+UHN2V6jB3waKk2CWn26W2QfzFwmPStBzkx8rXMK0DC+QiyNII2m4Ydm0wDQX/vgRowmX0IRpbOJ7Zp1g8axXKnBvgtfh3cInSVuAaTcmSGJzFph7BtstgabyvX6l/LV8fNXuOWA3gX+nm8sT95HjUDRXL3U0gb/oSmoMC/A5v+9ioemTUvWyh/fpVrv1VyqqWfdu/XNkgS2Yn1+aFHSev+XUYMy0yBuTr3BP4+FPWNg/8WfTQ8tUPHdb9TRj0Fr7hsqqocWTQpxC/sZQmEFVpNaSqVIfW/uw2LFE8EbWTUuJYn+UJODp7uvr9im15wbaPgHMe48efCR691t+D03evPyDl0Z1x/YL77NGdjxT4zvN4qgFqruFzSiJ8xT83ufwv5+6B1VcHjxSBi9/lH40Xi3ApwbiqJXpCNewHiqEXJAFs146GMvKpYn2G1IrLhhvL3IbbK4OP0UxX48="
    - secure: "IcX2bad8MQuHvX+BfT7hlgV0zlGwTmohFAts9hCA3AnE4CYhqYPVs28Bs3vuyZ2lslaJs7EPj1t3PU8yxTZwjO4SGAmwVsQYCO295oGFeW2xU39rsrLFYHk+BZRkFXCQ8pxBSDJhhHTCvbpExBHES7ptI5ceppxcYmRVAtD8S7NSr21qw7ajW12VJfuhdaTeYinp2eALYA0OCJpEIY4jmf04zmuicM2kbpEVKraBWCnds+nih5GbnGKbwGtpGoLMSbsff+mJboWnSzOM3ht3MMDhq4EVp8kCUIFTIS3F+QVcE0cujKm8GvmvJR9LjycK6kPo3aEcu0pImRNWT76VKKRDz0J9CMHG5/A9iFtpibaApHypHsCR7VxCAVGKNA/9GEnLWgC6KMbyD0V4obb9REZTXC3A3GWO4C/sFLzTVrf7NDBHnn2+14jSxx33lDo7Nk7FE2Ij7qqOBhRRGdiK7AH6CyFDc2BbJqpxdi/HonVXFKDprqsHUGIcFnSRPsDuzbNlIjhgISmx5w6BwPTtuMsuZo7DtrtBghXXmWuDGDVl1P/G6HdESFswyy88lyfXEpQyhslcx7p9przYnyqKl/8B8kIDf+K/BfBqAB3rhmpNGLeuv3IKtrxV4tKPetJ9OWcsWIkUmQZVmiXyYYYXo7U9x+r8vKOvnexB1p9CHuU="
    - secure: "R+p9/DsA9Wh5fft5y2RoI00722l1PukCnZY/7VGPRIoKf6L6+1Gqqi6hzc3dfIiRnyritKASZHFuctLoV9wMOTekHXDquCYbcB/A0pQ8z5AE+fLsLQNjfmYq2tnHi+FBrlWv3Vht0RUQVqZ4mSVjGLvjNYmnZasrQBQ2XJjkzOzfIAQmndI3fm6D5BFVWuBRkzTeaLvzQPoqNQGxxSYw9usBC+Fll8PAKgQS7ybFxtjS6dKXEbo/UjxrJKvfwn2z8JL3VH0IlpR63zstr2XpFUdoMenZyZc2jO2O72/UvejKVVo6iXseIhRTUMQaewTZ8Bi8KqE71ETwZ9w9f1JFeBFr/VI+SSyrIhlMiW8ed8cZ6bCPu1ZBs3GouK5re003OvWq3Bre1on3lyZ3U9Rg6jJvtNxUGD5iuNqhWEN3zJs8T2D67bZcqZy7Qqd0Sc+K7zMv+862fAcnt4tkpOwuQQgSUKY6McQFVMxj2KsGqhzRgxt50B1mEoTLcMK2EDnaGDBnF7y5dkm2o2RrUI6yXz1MFANsPMeZV6ns3BPmCAMFwA5di+RtSQhoJmG2ohKMfrX8EM9t4QU+93iiXDyTbZjvjlrTi73PSPLv20UOV+qslfEEK3mHmlYbw5pjCBI7AoBF7QQ+gwa3OfIJp3HVZrC1ydSxZ8pVvjKMlj9E8gw="
before_script:
  - psql -c 'create database test_db;' -U postgres
# command to install dependencies
install: "pip install -r requirements.txt"
# command to run tests
script: sh -c 'cd src && python manage.py test'