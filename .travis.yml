language: python
services:
- postgresql
python:
  - "3.5"
env:
  - DJANGO_SETTINGS_MODULE=config.settings.test
  - DB=postgres
  - DEBUG=False
  - DATABASE_URL=postgres://postgres@localhost/test_db
  - secure: "NQj/U2l3hORvZoHfFIYBwS9s7mOmrD1VgnmWZbAh6xmzUAzgZdsuaOhPhzbvUUyyBtepHmAGzuJgp63pd+fS7k1P5jT0EHRzGzf4JgwHCJ6ZUElWUfPIWooHTUcMawE1aSDhON7pQ+25KW8tCRNPGVTEEt/3HegbcopdugN3oe4vxAXNl0tnJeM+V2YNBrIfReZasqPyi3+Xl+LmKYBmr0uL0ko+UHN2V6jB3waKk2CWn26W2QfzFwmPStBzkx8rXMK0DC+QiyNII2m4Ydm0wDQX/vgRowmX0IRpbOJ7Zp1g8axXKnBvgtfh3cInSVuAaTcmSGJzFph7BtstgabyvX6l/LV8fNXuOWA3gX+nm8sT95HjUDRXL3U0gb/oSmoMC/A5v+9ioemTUvWyh/fpVrv1VyqqWfdu/XNkgS2Yn1+aFHSev+XUYMy0yBuTr3BP4+FPWNg/8WfTQ8tUPHdb9TRj0Fr7hsqqocWTQpxC/sZQmEFVpNaSqVIfW/uw2LFE8EbWTUuJYn+UJODp7uvr9im15wbaPgHMe48efCR691t+D03evPyDl0Z1x/YL77NGdjxT4zvN4qgFqruFzSiJ8xT83ufwv5+6B1VcHjxSBi9/lH40Xi3ApwbiqJXpCNewHiqEXJAFs146GMvKpYn2G1IrLhhvL3IbbK4OP0UxX48="
  - secure: "FLHOvLHXwxF0IwgmIWKA1kO/oIhZwxhyd2+IGvyTm+AxFqT/BNA13c4WJqhp5zvmKolinsnYykxe4PByOvDnp/tsICfUcjpcjWsg3nXrJpUmGouUyBivdoFV4LwraerAe9iA9DJ4/cZcHbpRs6uoyigwzT+/wtSJORpHy9P3a/bUCAZNHrjEyFCzjMRb6mYO2CG45TpHNKYFmkUKJjg2UyCYEdWo6f3GssIVoUEXQTbjhTGWrmkF5XrP0kl+Ug3RNtdgeqj3cLWpvnZKrbJSHlL6YJHrEyJQVwHRrQAN3tjERSb+hp1Mupwi9CaC3Am1DDAeirB0I5LrGlNJKO+ZpL1cH8kE4Arnezal6fyKWc+vZ3s/X/lS/uuuMivOf5JxRNOnS88vCdcB4KM7ZJNWjJjtFn6GmcQTnH7gBOCP53JU3Uko7Z3TXRrhai1EAV1IiaSDAZGy1HtJdzj/0UvTn5GrwMvZbjpSTkVpEmf3TBeJuhLwCsNVH2InmcmDyv9sRi7XHToXhyjR6SyRxFnyWAs1BQ5UMs6U6XqdA0RPt5L7o6BZUmu0bd+h9nofGVxaB58B8QyPFmuFV/4eTA/oUdABSAsm6LMpc/QmNWeblPIfbSxQZH66UZGgOgad06G00bbA+XUGnitZ+vBYAuxhwrfvV4NvpxZ+UulUli2RXAk="
  - secure: "R+p9/DsA9Wh5fft5y2RoI00722l1PukCnZY/7VGPRIoKf6L6+1Gqqi6hzc3dfIiRnyritKASZHFuctLoV9wMOTekHXDquCYbcB/A0pQ8z5AE+fLsLQNjfmYq2tnHi+FBrlWv3Vht0RUQVqZ4mSVjGLvjNYmnZasrQBQ2XJjkzOzfIAQmndI3fm6D5BFVWuBRkzTeaLvzQPoqNQGxxSYw9usBC+Fll8PAKgQS7ybFxtjS6dKXEbo/UjxrJKvfwn2z8JL3VH0IlpR63zstr2XpFUdoMenZyZc2jO2O72/UvejKVVo6iXseIhRTUMQaewTZ8Bi8KqE71ETwZ9w9f1JFeBFr/VI+SSyrIhlMiW8ed8cZ6bCPu1ZBs3GouK5re003OvWq3Bre1on3lyZ3U9Rg6jJvtNxUGD5iuNqhWEN3zJs8T2D67bZcqZy7Qqd0Sc+K7zMv+862fAcnt4tkpOwuQQgSUKY6McQFVMxj2KsGqhzRgxt50B1mEoTLcMK2EDnaGDBnF7y5dkm2o2RrUI6yXz1MFANsPMeZV6ns3BPmCAMFwA5di+RtSQhoJmG2ohKMfrX8EM9t4QU+93iiXDyTbZjvjlrTi73PSPLv20UOV+qslfEEK3mHmlYbw5pjCBI7AoBF7QQ+gwa3OfIJp3HVZrC1ydSxZ8pVvjKMlj9E8gw="
before_script:
  - psql -c 'create database test_db;' -U postgres
# command to install dependencies
install: "pip install -r requirements.txt"
# command to run tests
script: sh -c 'cd src && python manage.py test'